(function(){var exports={};
"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,i,a){if(i)e(t.prototype,i);if(a)e(t,a);return t}}();function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var ImageDrop=exports.ImageDrop=function(){function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,e);this.quill=t;this.handleDrop=this.handleDrop.bind(this);this.handlePaste=this.handlePaste.bind(this);this.quill.root.addEventListener("drop",this.handleDrop,false);this.quill.root.addEventListener("paste",this.handlePaste,false);if(e.isIE()){this.quill.root.addEventListener("dragover",function(e){e.stopPropagation();e.preventDefault()})}}_createClass(e,[{key:"handleDrop",value:function e(t){t.preventDefault();if(t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length){if(document.caretRangeFromPoint){var i=document.getSelection();var a=document.caretRangeFromPoint(t.clientX,t.clientY);if(i&&a){i.setBaseAndExtent(a.startContainer,a.startOffset,a.startContainer,a.startOffset)}}this.readFiles(t.dataTransfer.files,this.insert.bind(this))}}},{key:"handlePaste",value:function e(t){var i=this;if(t.clipboardData&&t.clipboardData.items&&t.clipboardData.items.length||window.clipboardData&&window.clipboardData.files&&window.clipbaordData.files.length){this.readFiles(t.clipboardData.items||window.clipboardData.files,function(e){var t=i.quill.getSelection();if(t){}else{setTimeout(function(){return i.insert(e)},0)}})}}},{key:"insert",value:function e(t){var i=(this.quill.getSelection()||{}).index||this.quill.getLength();this.quill.insertEmbed(i,"image",t,"user")}},{key:"readFiles",value:function e(t,i){[].forEach.call(t,function(e){if(!e.type.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp|vnd\.microsoft\.icon)/i)){return}var t=new FileReader;t.onload=function(e){i(e.target.result)};var a=e.getAsFile?e.getAsFile():e;if(a instanceof Blob){t.readAsDataURL(a)}})}}],[{key:"ieIE",value:function e(){var t=window.navigator.userAgent;var i=t.indexOf("MSIE ");if(i>0){return parseInt(t.substring(i+5,t.indexOf(".",i)),10)}var a=t.indexOf("Trident/");if(a>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");if(r>0){return parseInt(t.substring(r+5,t.indexOf(".",r)),10)}return false}}]);return e}();
window.Quill.register('modules/imageDrop',exports.ImageDrop);})();
